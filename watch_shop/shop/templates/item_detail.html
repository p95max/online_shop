{% extends 'base.html' %}

{% block title %}{{ watch.model }}{% endblock %}

{% block content %}
<section class="watch-detail" style="width: 700px">
  <ul class="nav nav-tabs" id="addArticleTabs" role="tablist" style="width: 100%">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="about-tab" data-bs-toggle="tab" data-bs-target="#article" type="button" role="tab">
        📄 About
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="comments-tab" data-bs-toggle="tab" data-bs-target="#comments" type="button" role="tab">
        💬 Comments ({{ watch.comments.count }})
      </button>
    </li>
  </ul>

  <div class="tab-content mt-3">
    <!-- About tab -->
<div class="tab-pane fade show active" id="article" role="tabpanel">
  <div class="watch-card container mt-4">

    <h2 class="mb-4">{{ watch.model }}</h2>

    <div class="row">
      <!-- Image -->
      <div class="col-md-4 text-center">
        {% if watch.image %}
          <img src="{{ watch.image.url }}" alt="{{ watch.model }}" class="img-fluid mb-3" style="max-height: 300px;">
        {% endif %}
      </div>

      <!-- Specifications right -->
      <div class="col-md-8">
        <ul class="watch-meta list-unstyled">
          {% if watch.brand %}
            <li><strong>Brand:</strong> {{ watch.brand.name }}</li>
          {% endif %}
          {% if watch.year %}
            <li><strong>Year:</strong> {{ watch.year }}</li>
          {% endif %}
          {% if watch.price %}
            <li><strong>Price:</strong> €{{ watch.price }}</li>
          {% endif %}
        </ul>
      </div>
    </div>

    <!-- Description down -->
    <div class="row mt-4">
      <div class="col-12">
        <p class="description">{{ watch.description }}</p>
      </div>
    </div>

  </div>
</div>


    <!-- Comments tab -->
    <div class="tab-pane fade" id="comments" role="tabpanel">
      {% if watch.comments.all %}
        <div class="list-group">
          {% for comment in watch.comments.all %}
            <div class="list-group-item">
              <h6 class="mb-1">🧑‍💼 {{ comment.name }}</h6>
              <p class="mb-1">🗨️ {{ comment.text }}</p>
              <small class="text-muted">{{ comment.created_at|date:"d.m.Y H:i" }}</small>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p>😕 No comments yet</p>
      {% endif %}

      <form method="post" class="mb-4 mt-3">
        {% csrf_token %}
        <div class="mb-3">
          <label for="name" class="form-label">Your name:</label>
          <input type="text" class="form-control" id="name" name="name" placeholder="Enter your name" required>
        </div>
        <div class="mb-3">
          <label for="message" class="form-label">Your comment:</label>
          <textarea class="form-control" id="message" name="message" rows="4" placeholder="Your comment..." required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Publish</button>
      </form>
    </div>
  </div>
</section>
{% endblock %}
